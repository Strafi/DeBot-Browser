(this["webpackJsonpresults-interface"]=this["webpackJsonpresults-interface"]||[]).push([[0],{109:function(e,t,n){},112:function(e,t,n){},113:function(e,t,n){},114:function(e,t,n){},115:function(e,t,n){},116:function(e,t,n){},117:function(e,t,n){},118:function(e,t,n){},119:function(e,t,n){},123:function(e,t,n){"use strict";n.r(t);var s=n(1),r=n(25),a=n.n(r),c=n(8),i=n(13),o=n(41),u=n(2),l=n.n(u),d=n(6),p=n(14),m=n(15),b=n(63),j=n(4),f=new(function(){function e(){Object(p.a)(this,e)}return Object(m.a)(e,[{key:"init",value:function(){this.client=Object(b.a)({space:"02r1z9muycae",environment:"master",accessToken:"3tSpi5F2qmkrKSHKTXIzywLQnoKGF3bANLyL7AMR6kg"})}},{key:"getContests",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.skip,n=void 0===t?0:t,s=e.governance,r=e.address,a={skip:n,content_type:j.DB_CONTENT_TYPES.CONTEST,order:"-sys.createdAt"};return s&&(a["fields.governance.sys.contentType.sys.id"]=j.DB_CONTENT_TYPES.GOVERNANCE,a["fields.governance.fields.name"]=s),r&&(a["fields.address"]=r),this.client.getEntries(a)}},{key:"getContestByAddress",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getContests({address:t});case 3:return n=e.sent,(s=n.items[0].fields).governance=s.governance.fields.name,e.abrupt("return",s);case 9:return e.prev=9,e.t0=e.catch(0),console.warn("No contest found in DB by address: ",t),e.abrupt("return",{governance:j.DEFAULT_GOVERNANCE.NAME});case 13:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getGovernances",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.client.getEntries({content_type:j.DB_CONTENT_TYPES.GOVERNANCE,order:"fields.name"});case 3:return t=e.sent,n=t.items.map((function(e){return e.fields})),e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(0),console.error("Failed to fetch governances: ",e.t0),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()}]),e}()),h=n(17),v=n(59),y=n(3),O="contest/SET_CONTEST_INFO",_="contest/SET_BULK_CONTESTS_INFO",x="contest/ADD_BULK_CONTESTS_INFO",g="contest/SET_SUBMISSIONS_INFO",A="contest/SET_JURY_INFO",S="contest/UPDATE_SUBMISSION_REWARD",w=function(e){return function(t){t({type:O,payload:e})}},C=function(e){return function(t){t({type:S,payload:e})}},k={contestsInfo:{},submissionsInfo:{},jurorsInfo:{}};var N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0,n=t.type,s=t.payload;switch(n){case O:var r=Object(y.a)({},e.contestsInfo);return r[s.address]=s,Object(y.a)(Object(y.a)({},e),{},{contestsInfo:r});case _:var a={};return s.forEach((function(e){a[e.address]=e})),Object(y.a)(Object(y.a)({},e),{},{contestsInfo:a});case x:var c=Object(y.a)({},e.contestsInfo);return s.forEach((function(e){c[e.address]=e})),Object(y.a)(Object(y.a)({},e),{},{contestsInfo:c});case g:var i=s.address,o=s.submissions,u=Object(y.a)({},e.submissionsInfo);return u[i]=o,Object(y.a)(Object(y.a)({},e),{},{submissionsInfo:u});case A:var l=s.address,d=s.juryStats,p=Object(y.a)({},e.jurorsInfo);return p[l]=d,Object(y.a)(Object(y.a)({},e),{},{jurorsInfo:p});case S:var m=s.contestAddress,b=s.submissionId,j=s.reward,f=Object(y.a)({},e.submissionsInfo),h=f[m],v=h.map((function(e){return e.id===b?Object(y.a)(Object(y.a)({},e),{},{reward:j}):e}));return f[m]=v,Object(y.a)(Object(y.a)({},e),{},{submissionsInfo:f});default:return e}},E="common/SET_SELECTED_SUBGOV",I="common/SET_IS_TUTORIAL_ACTIVE",T=function(e){return function(t){t({type:I,payload:e})}},R={selectedGovernance:{name:j.DEFAULT_GOVERNANCE.NAME,fullName:j.DEFAULT_GOVERNANCE.FULL_NAME},isTutorialActive:!1};var L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0,n=t.type,s=t.payload;switch(n){case E:return Object(y.a)(Object(y.a)({},e),{},{selectedGovernance:s||R.selectedGovernance});case I:return Object(y.a)(Object(y.a)({},e),{},{isTutorialActive:s});default:return e}},P=Object(h.c)({contest:N,common:L}),F=[v.a],V=h.d.apply(void 0,[h.a.apply(void 0,F)].concat([])),U=Object(h.e)(P,{},V),D=n(7),J=(n(109),n(0)),B=function(){var e=Object(c.d)((function(e){return e.common.isTutorialActive})),t="app-container ".concat(e?"app-container--scroll-disabled":"");return Object(J.jsx)("div",{className:t,children:Object(J.jsxs)("div",{className:"app-container__flex-wrapper",children:[Object(J.jsx)(me,{}),Object(J.jsxs)(D.c,{children:[Object(J.jsx)(D.a,{exact:!0,path:"/",component:Fe}),Object(J.jsx)(D.a,{path:"/contest",component:Ee})]}),e&&Object(J.jsx)(Ue,{})]})})},Y=function(e){var t=e.onClick,n=void 0===t?function(){return!1}:t;return Object(J.jsxs)("svg",{className:"lens-icon",width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:n,children:[Object(J.jsx)("path",{d:"M16.8881 8.72414C16.8881 13.2678 13.2179 16.9483 8.69405 16.9483C4.17023 16.9483 0.5 13.2678 0.5 8.72414C0.5 4.18044 4.17023 0.5 8.69405 0.5C13.2179 0.5 16.8881 4.18044 16.8881 8.72414Z",stroke:"#6F6F6F"}),Object(J.jsx)("line",{y1:"-0.5",x2:"9.63903",y2:"-0.5",transform:"matrix(0.705884 0.708327 -0.705884 0.708327 14.3643 15.1724)",stroke:"#6F6F6F"})]})},G=function(){return Object(J.jsx)("svg",{className:"arrow-icon",width:"14",height:"9",viewBox:"0 0 14 9",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(J.jsx)("path",{d:"M6.76449 9L0.338936 0.230769L13.19 0.23077L6.76449 9Z",fill:"#737373"})})},M=function(){return Object(J.jsxs)("svg",{className:"checked-icon",width:"20",height:"14",viewBox:"0 0 20 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(J.jsx)("rect",{x:"1.63672",y:"5.36548",width:"9.96256",height:"1.81138",transform:"rotate(45 1.63672 5.36548)",fill:"#6F6F6F"}),Object(J.jsx)("rect",{x:"19.0166",y:"2.06494",width:"16.4416",height:"1.81138",transform:"rotate(135 19.0166 2.06494)",fill:"#6F6F6F"})]})},W=function(){return Object(J.jsx)("svg",{className:"back-icon",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(J.jsx)("path",{d:"M11.0156 2L3.00018 10.0154L11.0156 18.0309",stroke:"#5287C3",strokeWidth:"3"})})},K=function(e){var t=e.onClick,n=void 0===t?function(){return!1}:t;return Object(J.jsxs)("svg",{className:"cancel-icon",onClick:n,width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(J.jsx)("path",{d:"M9.99902 2L1.99989 9.99914",stroke:"#BABABA",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),Object(J.jsx)("path",{d:"M2.00098 2L10.0001 9.99914",stroke:"#BABABA",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})},z=n(20),H=n(19);var X=function(e){return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())};function q(e){return e.map((function(e){return{place:e.place||0,reward:e.reward===j.REWARD_TRIGGER_FOR_INPUT?0:e.reward||0,id:e.id,score:e.score||0,acceptAmount:e.acceptAmount,rejectAmount:e.rejectAmount,address:e.participantAddress,link:e.fileLink}}))}function Z(e){var t=[];for(var n in e){var s=e[n],r=s.acceptAmount,a=void 0===r?0:r,c=s.abstainAmount,i=void 0===c?0:c,o=s.rejectAmount,u=void 0===o?0:o,l=s.id,d=a+u+i;t.push({id:l,totalVotes:d,acceptAmount:a,abstainAmount:i,rejectAmount:u,address:n})}return t}function Q(){return(Q=Object(d.a)(l.a.mark((function e(t,n,s,r){var a,c,i,o,u,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=q(n),c=Z(s),i={title:t.title,link:t.link,submissions:a,jury:c,juryRewardPercent:r},o=JSON.stringify(i),e.next=6,fetch("/api/v1/export-excel",{method:"POST",headers:{"Content-Type":"application/json"},body:o});case 6:return u=e.sent,e.next=9,u.blob();case 9:d=e.sent,function(e){var t=document.createElement("a");t.download="".concat(i.title,".xlsx"),t.href=e,t.click()}(URL.createObjectURL(d));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $=function(e,t,n,s){return Q.apply(this,arguments)},ee=n(16);var te=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j.SORT_BY_VALUES_PARTICIPANTS.DEFAULT,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=e.sort((function(e,s){var r=e[t],a=s[t];return"string"===typeof r&&(r=parseInt(r,10)),"string"===typeof a&&(a=parseInt(a,10)),n?r-a:a-r}));return s},ne=n(12);var se=function(e){if(!e)return!1;try{var t={};for(var n in e){var s=n.split("-"),r=Object(ne.a)(s,2),a=r[0],c=r[1];if(c)for(var i=parseInt(a,10),o=parseInt(c,10),u=i;u<=o;u++)t[u]=e[n];else t[a]=e[a]}return t}catch(l){return console.error("Error while parsing rewards: ",l),!1}};var re=function(e,t){var n=e.map((function(e){var t=0===e.marks.length?e.rejectAmount>0:e.marks.length/e.rejectAmount<1,n=Object(y.a)(Object(y.a)({},e),{},{isRejected:t});if(t)n.reward=0,n.score=0;else{var s=(n.marks.reduce((function(e,t){return e+parseInt(t,10)}),0)/n.marks.length).toFixed(2);n.score=+s}return n.acceptAmount=n.marks.length,n}));return function(e,t){var n,s,r=se(t),a={},c=e.map((function(e,t,s){if(Number.isNaN(e.score))return Object(y.a)(Object(y.a)({},e),{},{place:"",reward:null});var c,i=s[t-1],o=t+1;return c=e.isRejected?0:r?r[o]||0:j.REWARD_TRIGGER_FOR_INPUT,i&&i.score===e.score&&0!==e.score&&(a[t-1]=n,a[t]=c),n=c,Object(y.a)(Object(y.a)({},e),{},{place:o,reward:c})})),i={},o=+Object.keys(a).pop();for(var u in a){var l=+u,d=l===o;if((!s||s+1===l&&c[s].score===c[l].score)&&!d)i[l]=a[l];else{d&&(i[l]=a[l]);var p=Object.values(i),m=p.reduce((function(e,t){return e+t}),0)/p.length;for(var b in i)c[b].reward=m;i=Object(ee.a)({},l,a[l])}s=l}return c}(te(n,j.SORT_BY_VALUES_PARTICIPANTS.SCORE),t)};var ae=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j.SORT_BY_VALUES_JURY.DEFAULT,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=[];for(var r in e){var a=e[r],c=a.acceptAmount,i=void 0===c?0:c,o=a.abstainAmount,u=void 0===o?0:o,l=a.rejectAmount,d=void 0===l?0:l,p=a.id,m=i+d+u;s.push({address:r,acceptAmount:i,abstainAmount:u,rejectAmount:d,totalVotes:m,id:p})}var b=s.sort((function(e,s){var r=e[t],a=s[t];return"string"===typeof r&&(r=parseInt(r,10)),"string"===typeof a&&(a=parseInt(a,10)),n?r-a:a-r})),f=b.reduce((function(e,t){var n=t.address,s=t.acceptAmount,r=t.abstainAmount,a=t.rejectAmount,c=t.id;return Object(y.a)(Object(y.a)({},e),{},Object(ee.a)({},n,{acceptAmount:s,abstainAmount:r,rejectAmount:a,id:c}))}),{});return f};var ce=function(e){return"/contest?contestAddress=".concat(e)};var ie=function(e){return"".concat(j.EXPLORER_BASE_URL).concat(e)};var oe=function(e){return e.toLocaleString()};var ue=function(e,t,n,s,r,a){return(e+t)/(n+s)*r*a/100};n(112);var le=function(e){Object(z.a)(n,e);var t=Object(H.a)(n);function n(){var e;Object(p.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={inputValue:"",isInvalidAddress:!1,isSearching:!1},e.searchContest=Object(d.a)(l.a.mark((function t(){var n,s,r,a,c,i,u,d,p;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,s=n.inputValue,r=n.isSearching,a=e.props,c=a.contestsInfo,i=a.history,u=a.setContestInfo,s&&!r){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,o.a.isAddressValid(s);case 6:if(t.sent){t.next=9;break}return t.abrupt("return",e.setState({isInvalidAddress:!0}));case 9:if(c[s]){t.next=20;break}return e.setState({isSearching:!0}),t.next=14,o.a.getContestInfo(s);case 14:if(d=t.sent,e.setState({isSearching:!1}),d){t.next=18;break}return t.abrupt("return",e.setState({isInvalidAddress:!0}));case 18:d.address=s,u(d);case 20:return p=ce(s),t.abrupt("return",i.push(p));case 22:case"end":return t.stop()}}),t)}))),e.handleInputChange=function(t){e.setState({inputValue:t.target.value,isInvalidAddress:!1})},e.handleKeyPress=function(t){var n=t.shiftKey,s=t.key,r=t.altKey;"Enter"===s&&!n&&!r&&(t.preventDefault(),e.searchContest())},e}return Object(m.a)(n,[{key:"render",value:function(){var e=this.state,t=e.inputValue,n=e.isInvalidAddress,s=e.isSearching,r="search-bar-container ".concat(n?"search-bar-container--invalid":""," ").concat(s?"search-bar-container--searching":"");return Object(J.jsxs)("div",{className:r,children:[Object(J.jsx)("input",{className:"search-bar-container__input",type:"text",placeholder:"Enter contest address",value:t,onChange:this.handleInputChange,onKeyPress:this.handleKeyPress}),Object(J.jsx)(Y,{onClick:this.searchContest})]})}}]),n}(s.Component),de=Object(c.b)((function(e){return{contestsInfo:e.contest.contestsInfo}}),{setContestInfo:w})(le),pe=Object(D.h)(de),me=(n(113),function(){var e=Object(D.g)("/contest"),t=Object(c.c)();return Object(J.jsxs)("header",{className:"header-container",children:[Object(J.jsx)(i.b,{to:"/",children:Object(J.jsx)("h1",{children:"Free TON Contests Results"})}),e&&Object(J.jsxs)(i.b,{to:"/",className:"header-container__back-button",children:[Object(J.jsx)(W,{}),Object(J.jsx)("p",{children:"Back"})]}),Object(J.jsx)(pe,{}),Object(J.jsx)("div",{className:"header-container__address-explanation",onClick:function(){return t(T(!0))},children:"Where to find contest address?"})]})}),be=function(e){var t=e.setJuryView,n=e.exportExcel,s=e.isJuryView,r=e.juryRewardPercent,a=e.setJuryRewardPercent,c="number"===typeof r&&!Number.isNaN(r),i="contest-header__participants-view-button ".concat(s?"":"contest-header__participants-view-button--active"),o="contest-header__jury-view-button ".concat(s?"contest-header__jury-view-button--active":""),u="contest-header__reward-input-container ".concat(c?"contest-header__reward-input-container--filled":"");return Object(J.jsxs)("div",{className:"contest-header__controls",children:[Object(J.jsxs)("div",{className:"contest-header__view-switcher",children:[Object(J.jsx)("div",{onClick:function(){return t(!1)},className:i,children:"Participants"}),Object(J.jsx)("div",{onClick:function(){return t(!0)},className:o,children:"Jury"})]}),s&&Object(J.jsxs)("div",{className:u,children:[Object(J.jsx)("input",{className:"contest-header__reward-input",type:"text",placeholder:"Enter jury reward %",value:r,onChange:function(e){if(!e.target.value)return a(void 0);var t=+e.target.value;t&&!Number.isNaN(t)&&a(t)}}),Object(J.jsx)(M,{})]}),Object(J.jsx)("div",{onClick:n,className:"contest-header__export-button",children:"Export to .xlsx"})]})},je=(n(114),function(e){var t=e.contestInfo,n=e.setJuryView,s=e.exportExcel,r=e.isJuryView,a=e.juryRewardPercent,c=e.setJuryRewardPercent,i=e.isControlsVisible,o=Date.now(),u=o<1e3*t.contestDeadline,l=o>1e3*t.contestDeadline&&o<1e3*t.votingDeadline,d="contest-header__status ".concat(u?"contest-header__status--underway":""," ").concat(l?"contest-header__status--voting":""),p=u?"(Underway)":l?"(Voting)":"";return Object(J.jsxs)("div",{className:"contest-header",children:[Object(J.jsxs)("div",{className:"contest-header__header",children:["Results ",Object(J.jsx)("span",{className:d,children:p})]}),Object(J.jsx)("a",{href:t.link,target:"_blank",rel:"noreferrer",className:"contest-header__title",children:t.title}),i&&Object(J.jsx)(be,{setJuryView:n,exportExcel:s,setJuryRewardPercent:c,isJuryView:r,juryRewardPercent:a})]})}),fe=function(e){var t=e.children,n=e.className,s=e.onClick,r=void 0===s?function(){return!1}:s,a=e.styles,c=void 0===a?{}:a,i="contest-table__cell contest-table__cell--th";return n&&(i+=" "+n),Object(J.jsx)("th",{style:c,onClick:r,className:i,children:t})},he={color:"#0F8CFF",fontSize:"26px"},ve={color:"#0D9F1C"},ye={color:"#D20808"},Oe=function(e){var t=e.submissionsSortParams,n=e.sortSubmissions,s=t.field,r=t.isAskending,a="".concat(s===j.SORT_BY_VALUES_PARTICIPANTS.PLACE?"contest-table__cell--active ".concat(r?"contest-table__cell--askending":""):"contest-table__cell--selectable"),c="".concat(s===j.SORT_BY_VALUES_PARTICIPANTS.SUBMISSION_ID?"contest-table__cell--active ".concat(r?"contest-table__cell--askending":""):"contest-table__cell--selectable"),i="".concat(s===j.SORT_BY_VALUES_PARTICIPANTS.ACCEPTED?"contest-table__cell--active ".concat(r?"contest-table__cell--askending":""):"contest-table__cell--selectable"),o="".concat(s===j.SORT_BY_VALUES_PARTICIPANTS.REJECTED?"contest-table__cell--active ".concat(r?"contest-table__cell--askending":""):"contest-table__cell--selectable");return Object(J.jsxs)("tr",{className:"contest-table__row",children:[Object(J.jsxs)(fe,{className:a,onClick:function(){return n(j.SORT_BY_VALUES_PARTICIPANTS.PLACE)},children:["Place",Object(J.jsx)(G,{})]}),Object(J.jsx)(fe,{children:"Reward"}),Object(J.jsxs)(fe,{className:c,onClick:function(){return n(j.SORT_BY_VALUES_PARTICIPANTS.SUBMISSION_ID)},children:["Submission \u2116",Object(J.jsx)(G,{})]}),Object(J.jsx)(fe,{children:"Avg. Score"}),Object(J.jsxs)(fe,{className:i,onClick:function(){return n(j.SORT_BY_VALUES_PARTICIPANTS.ACCEPTED)},children:["Accepted",Object(J.jsx)(G,{})]}),Object(J.jsxs)(fe,{className:o,onClick:function(){return n(j.SORT_BY_VALUES_PARTICIPANTS.REJECTED)},children:["Rejected",Object(J.jsx)(G,{})]}),Object(J.jsx)(fe,{className:"contest-table__cell--wallet",children:"Wallet"})]})},_e=function(e){var t=e.jurySortParams,n=e.sortJury,s=t.field,r=t.isAskending,a="".concat(s===j.SORT_BY_VALUES_JURY.JURY_ID?"contest-table__cell--active ".concat(r?"contest-table__cell--askending":""):"contest-table__cell--selectable"),c="".concat(s===j.SORT_BY_VALUES_JURY.TOTAL_VOTES?"contest-table__cell--active ".concat(r?"contest-table__cell--askending":""):"contest-table__cell--selectable"),i="".concat(s===j.SORT_BY_VALUES_JURY.ACCEPTED?"contest-table__cell--active ".concat(r?"contest-table__cell--askending":""):"contest-table__cell--selectable"),o="".concat(s===j.SORT_BY_VALUES_JURY.ABSTAINED?"contest-table__cell--active ".concat(r?"contest-table__cell--askending":""):"contest-table__cell--selectable"),u="".concat(s===j.SORT_BY_VALUES_JURY.REJECTED?"contest-table__cell--active ".concat(r?"contest-table__cell--askending":""):"contest-table__cell--selectable");return Object(J.jsxs)("tr",{className:"contest-table__row",children:[Object(J.jsxs)(fe,{className:a,onClick:function(){return n(j.SORT_BY_VALUES_JURY.JURY_ID)},children:["Jury \u2116",Object(J.jsx)(G,{})]}),Object(J.jsx)(fe,{children:"Reward"}),Object(J.jsxs)(fe,{className:c,onClick:function(){return n(j.SORT_BY_VALUES_JURY.TOTAL_VOTES)},children:["Votes Count",Object(J.jsx)(G,{})]}),Object(J.jsxs)(fe,{className:i,onClick:function(){return n(j.SORT_BY_VALUES_JURY.ACCEPTED)},children:["Accepted",Object(J.jsx)(G,{})]}),Object(J.jsxs)(fe,{className:o,onClick:function(){return n(j.SORT_BY_VALUES_JURY.ABSTAINED)},children:["Abstained",Object(J.jsx)(G,{})]}),Object(J.jsxs)(fe,{className:u,onClick:function(){return n(j.SORT_BY_VALUES_JURY.REJECTED)},children:["Rejected",Object(J.jsx)(G,{})]}),Object(J.jsx)(fe,{className:"contest-table__cell--wallet",children:"Wallet"})]})},xe=function(e){var t=e.contestInfo,n=e.isJuryView,s=e.submissionsSortParams,r=e.jurySortParams,a=e.sortSubmissions,c=e.sortJury,i=t.title;return Object(J.jsxs)("thead",{className:"contest-table__header",children:[Object(J.jsx)("tr",{className:"contest-table__header-hidden-line",children:Object(J.jsx)("th",{colSpan:"7"})}),Object(J.jsx)("tr",{className:"contest-table__header-hidden-line",children:Object(J.jsx)("th",{colSpan:"7",style:he,children:Object(J.jsx)("a",{href:t.link,children:i})})}),n?Object(J.jsx)(_e,{jurySortParams:r,sortJury:c}):Object(J.jsx)(Oe,{submissionsSortParams:s,sortSubmissions:a})]})},ge=function(e){var t=e.children,n=e.className,s=e.styles,r=void 0===s?{}:s,a="contest-table__cell";return n&&(a+=" "+n),Object(J.jsx)("td",{style:r,className:a,children:t})},Ae=function(e){var t=e.contestAddress,n=e.submissionId,r=Object(s.useState)(),a=Object(ne.a)(r,2),i=a[0],o=a[1],u=Object(c.c)(),l=function(){"number"!==typeof i||Number.isNaN(i)||u(C({contestAddress:t,submissionId:n,reward:i}))};return Object(J.jsx)("input",{className:"contest-table__reward-input",type:"text",placeholder:"Enter reward",value:i,onChange:function(e){if(!e.target.value)return o(void 0);var t=+e.target.value;"number"!==typeof t||Number.isNaN(t)||o(t)},onBlur:l,onKeyPress:function(e){var t=e.shiftKey,n=e.key,s=e.altKey;"Enter"===n&&!t&&!s&&(e.preventDefault(),l())}})},Se=function(e){var t,n=e.contestSubmissions,s=e.isJuryView,r=e.contestJury,a=e.juryRewardPercent,i=e.contestAddress,o=Object(c.c)(),u=0,l=n.map((function(e,t){"number"===typeof e.reward&&!Number.isNaN(e.reward)&&e.reward>0&&(u+=e.reward);var n=!e.score||Number.isNaN(e.score)?"":e.score.toFixed(2),s="contest-table__row ".concat(0===t||t%2===0?"contest-table__row--grey":""," ").concat(e.isRejected?"contest-table__row--rejected":""),r=ie(e.participantAddress),a=!e.isRejected&&e.reward===j.REWARD_TRIGGER_FOR_INPUT,c="number"===typeof e.reward?oe(e.reward):"";return Object(J.jsxs)("tr",{className:s,children:[Object(J.jsx)(ge,{children:e.place}),Object(J.jsx)(ge,{children:a?Object(J.jsx)(Ae,{contestAddress:i,submissionId:e.id}):Object(J.jsxs)(J.Fragment,{children:[c,c&&!e.isRejected&&Object(J.jsx)(K,{onClick:function(){return t=e.id,void o(C({contestAddress:i,submissionId:t,reward:j.REWARD_TRIGGER_FOR_INPUT}));var t}})]})}),Object(J.jsx)(ge,{children:e.fileLink?Object(J.jsx)("a",{href:e.fileLink,tabIndex:"-1",target:"_blank",rel:"noreferrer",children:e.id}):e.id}),Object(J.jsx)(ge,{children:n}),Object(J.jsx)(ge,{styles:ve,children:e.acceptAmount}),Object(J.jsx)(ge,{styles:ye,children:e.rejectAmount}),Object(J.jsx)(ge,{className:"contest-table__cell--wallet",children:Object(J.jsx)("a",{tabIndex:"-1",href:r,target:"_blank",rel:"noreferrer",children:e.participantAddress})})]},"".concat(e.participantAddress).concat(e.id))})),d=0,p=0,m=0,b=0;if(s){var f=[];for(var h in Object.values(r).forEach((function(e){var t=e.acceptAmount,n=void 0===t?0:t,s=e.abstainAmount,r=void 0===s?0:s,a=e.rejectAmount;d+=n,p+=void 0===a?0:a,m+=r})),r){var v=r[h],y=v.acceptAmount,O=void 0===y?0:y,_=v.abstainAmount,x=void 0===_?0:_,g=v.rejectAmount,A=void 0===g?0:g,S=v.id,w=O+A+x,k=void 0;"number"===typeof a&&!Number.isNaN(a)&&u&&(b+=k=ue(O,A,d,p,u,a));var N=0===f.length||f.length%2===0,E="contest-table__row ".concat(N?"contest-table__row--grey":""),I=ie(h),T="number"===typeof k?oe(+k.toFixed(2)):"";f.push(Object(J.jsxs)("tr",{className:E,children:[Object(J.jsx)(ge,{children:S}),Object(J.jsx)(ge,{children:T}),Object(J.jsx)(ge,{children:w}),Object(J.jsx)(ge,{styles:ve,children:O}),Object(J.jsx)(ge,{children:x}),Object(J.jsx)(ge,{styles:ye,children:A}),Object(J.jsx)(ge,{className:"contest-table__cell--wallet",children:Object(J.jsx)("a",{href:I,target:"_blank",rel:"noreferrer",children:h})})]},h))}t=f}else t=l;return Object(J.jsxs)("tbody",{children:[t,Object(J.jsxs)("tr",{className:"contest-table__row contest-table__row--total-row",children:[Object(J.jsx)(ge,{children:"Total"}),s?Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(ge,{children:b?oe(+b.toFixed(2)):""}),Object(J.jsx)(ge,{children:d+p+m}),Object(J.jsx)(ge,{styles:ve,children:d}),Object(J.jsx)(ge,{children:m}),Object(J.jsx)(ge,{styles:ye,children:p}),Object(J.jsx)(ge,{})]}):Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(ge,{children:oe(u)||""}),Object(J.jsx)(ge,{}),Object(J.jsx)(ge,{}),Object(J.jsx)(ge,{}),Object(J.jsx)(ge,{}),Object(J.jsx)(ge,{})]})]})]})},we=(n(115),{field:j.SORT_BY_VALUES_PARTICIPANTS.DEFAULT,isAskending:!0}),Ce={field:j.SORT_BY_VALUES_JURY.DEFAULT,isAskending:!0},ke=function(e){Object(z.a)(n,e);var t=Object(H.a)(n);function n(){var e;Object(p.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={isJuryView:!1,juryRewardPercent:void 0,submissionsSortParams:we,jurySortParams:Ce},e.fetchSubmissionsInfo=Object(d.a)(l.a.mark((function t(){var n,s,r,a,c,i,u,d,p,m,b,j,f,h;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,s=n.addressFromUrl,r=n.contestInfo,a=n.setContestInfo,c=n.setSubmissionsInfo,i=n.setJuryInfo,u=n.history,d=e.state.jurySortParams,t.next=4,o.a.isAddressValid(s);case 4:if(t.sent){t.next=7;break}return t.abrupt("return",u.push("/"));case 7:if(p=r){t.next=13;break}return t.next=11,e.getContestFullInfo(s);case 11:p=t.sent,a(p);case 13:return p.juryRewardPercent&&e.setJuryRewardPercent(p.juryRewardPercent),t.next=16,o.a.getContestSubmissionsAndJurors(s);case 16:m=t.sent,b=m.submissionsWithStats,j=m.juryStats,f=re(b,p.rewards),h=ae(j,d.field,d.isAskending),c(s,f),i(s,h);case 23:case"end":return t.stop()}}),t)}))),e.getContestFullInfo=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,s,r,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([o.a.getContestInfo(t),f.getContestByAddress(t)]);case 2:return n=e.sent,s=Object(ne.a)(n,2),r=s[0],a=s[1],c=a.governance,e.abrupt("return",Object(y.a)(Object(y.a)(Object(y.a)({},r),a),{},{address:t,governance:c}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.exportExcel=Object(d.a)(l.a.mark((function t(){var n,s,r,a,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,s=n.contestInfo,r=n.contestSubmissions,a=n.contestJury,c=e.state.juryRewardPercent,t.prev=2,t.next=5,$(s,r,a,c);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),console.error("Table export failed: ",t.t0);case 10:case"end":return t.stop()}}),t,null,[[2,7]])}))),e.setJuryView=function(t){e.setState({isJuryView:t})},e.setJuryRewardPercent=function(t){e.setState({juryRewardPercent:t})},e.sortJury=function(t){var n=e.props,s=n.contestJury,r=n.setJuryInfo,a=n.addressFromUrl,c=e.state.jurySortParams,i=c.field,o=c.isAskending,u={field:t,isAskending:t===i?!o:o};r(a,ae(s,u.field,u.isAskending)),e.setState({jurySortParams:u})},e.sortSubmissions=function(t){var n=e.props,s=n.contestSubmissions,r=n.setSubmissionsInfo,a=n.addressFromUrl,c=e.state.submissionsSortParams,i=c.field,o=c.isAskending,u={field:t,isAskending:t===i?!o:o};r(a,te(s,u.field,u.isAskending)),e.setState({submissionsSortParams:u})},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){try{this.fetchSubmissionsInfo()}catch(e){console.error("Fetching submissions failed: ",e),setTimeout(this.fetchSubmissionsInfo,5e3)}}},{key:"componentDidUpdate",value:function(e){try{var t=this.props.addressFromUrl;e.addressFromUrl!==t&&(this.setJuryView(!1),this.setState({isJuryView:!1,juryRewardPercent:void 0,submissionsSortParams:we,jurySortParams:Ce}),this.fetchSubmissionsInfo())}catch(n){console.error("Fetching submissions failed: ",n),setTimeout(this.fetchSubmissionsInfo,5e3)}}},{key:"render",value:function(){var e=this.props,t=e.contestSubmissions,n=e.contestInfo,s=e.contestJury,r=e.addressFromUrl,a=this.state,c=a.isJuryView,i=a.juryRewardPercent,o=a.submissionsSortParams,u=a.jurySortParams,l=!!(null===t||void 0===t?void 0:t.length),d=c&&s&&!Object.keys(s).length||!c&&!l,p=!n||!t||!s;return Object(J.jsxs)("div",{className:"contest",children:[n&&Object(J.jsx)(je,{contestInfo:n,isJuryView:c,juryRewardPercent:i,setJuryView:this.setJuryView,setJuryRewardPercent:this.setJuryRewardPercent,exportExcel:this.exportExcel,isControlsVisible:l}),l&&!d&&Object(J.jsx)("div",{className:"contest-table-wrapper",children:Object(J.jsxs)("table",{className:"contest-table",children:[Object(J.jsx)(xe,{contestInfo:n,isJuryView:c,submissionsSortParams:o,jurySortParams:u,sortSubmissions:this.sortSubmissions,sortJury:this.sortJury}),Object(J.jsx)(Se,{contestSubmissions:t,contestJury:s,contestAddress:r,isJuryView:c,juryRewardPercent:i})]})}),p&&Object(J.jsx)(Ve,{}),!p&&d&&Object(J.jsx)(Ve,{isFailed:!0})]})}}]),n}(s.Component),Ne=Object(c.b)((function(e,t){var n=e.contest,s=t.location,r=n.contestsInfo,a=n.submissionsInfo,c=n.jurorsInfo,i=s.search,o=new URLSearchParams(i).get("contestAddress");return{contestInfo:r[o],contestSubmissions:a[o],contestJury:c[o],addressFromUrl:o}}),{setContestInfo:w,setSubmissionsInfo:function(e,t){return function(n){n({type:g,payload:{address:e,submissions:t}})}},setJuryInfo:function(e,t){return function(n){n({type:A,payload:{address:e,juryStats:t}})}}})(ke),Ee=Object(D.h)(Ne),Ie=n(65),Te=function(e){var t=e.contest,n=e.isGrey,s=function(e){var t=Date.now(),n=t<1e3*e.contestDeadline,s=t>1e3*e.contestDeadline&&t<1e3*e.votingDeadline,r=X(n?new Date(1e3*e.contestDeadline):new Date(1e3*e.votingDeadline)),a=r.toLocaleDateString("en-US",{month:"long",day:"numeric"}),c=r.toLocaleDateString("en-US",{year:"numeric"}),i=r.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"});return n?Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)("span",{className:"contests-list__item-date--underway",children:"Underway"})," until ",a,", ",c,", ",i," UTC"]}):s?Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)("span",{className:"contests-list__item-date--voting",children:"Voting"})," until ",a,", ",c,", ",i," UTC"]}):Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)("span",{className:"contests-list__item-date--ended",children:"Ended"})," ",a,", ",c,", ",i," UTC"]})}(t),r=ce(t.address),a="contests-list__item ".concat(n?"contests-list__item--grey":"");return Object(J.jsxs)(i.b,{to:r,className:a,children:[Object(J.jsx)("div",{className:"contests-list__item-title",children:t.title}),Object(J.jsx)("div",{className:"contests-list__item-date",children:s})]})},Re=function(e){var t=e.governances,n=e.isListOpen,s=Object(c.c)(),r=t.map((function(e){return Object(J.jsx)("div",{className:"subgov-switcher__list-item",onClick:function(){return s((t=e,function(e){e({type:E,payload:t})}));var t},children:e.fullName},e.name)})),a="subgov-switcher__list ".concat(n?"subgov-switcher__list--visible":"");return Object(J.jsx)("div",{className:a,children:r})},Le=function(e){var t=e.governances,n=e.selectedGovernance,r=Object(s.useRef)(null),a=Object(s.useState)(!1),c=Object(ne.a)(a,2),i=c[0],o=c[1],u=Object(s.useCallback)((function(e){var t;!(null===r||void 0===r||null===(t=r.current)||void 0===t?void 0:t.contains(e.target))&&i&&o(!1)}),[i]);Object(s.useEffect)((function(){return document.addEventListener("click",u),function(){document.removeEventListener("click",u)}}),[u]);var l="subgov-switcher__switch-block ".concat(i?"subgov-switcher__switch-block--active":""),d=t.filter((function(e){return e.name!==n.name}));return Object(J.jsxs)("div",{className:"subgov-switcher",children:[Object(J.jsx)("div",{className:"subgov-switcher__title",children:"Contests"}),Object(J.jsxs)("div",{ref:r,onClick:function(){return o(!i)},className:l,children:["Subgov: ".concat(n.fullName),Object(J.jsx)(G,{}),Object(J.jsx)(Re,{isListOpen:i,governances:d})]})]})},Pe=(n(116),function(e){Object(z.a)(n,e);var t=Object(H.a)(n);function n(){var e;Object(p.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={governances:[],isLoaderVisible:!1},e.fetchGovernances=Object(d.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.getGovernances();case 2:n=t.sent,e.setState({governances:n});case 4:case"end":return t.stop()}}),t)}))),e.fetchContests=Object(d.a)(l.a.mark((function t(){var n,s,r,a,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,s=n.setBulkContestsInfo,r=n.selectedGovernance,t.next=3,f.getContests({governance:r.name});case 3:return a=t.sent,t.next=6,Promise.all(a.items.map((function(t){return e.getContestFullInfo(t)})));case 6:c=t.sent,s(c);case 8:case"end":return t.stop()}}),t)}))),e.getContestFullInfo=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,s,r,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fields,s=n.address,r=n.governance,a=Object(Ie.a)(n,["address","governance"]),e.next=3,o.a.getContestInfo(s);case 3:return c=e.sent,e.abrupt("return",Object(y.a)(Object(y.a)(Object(y.a)({},c),a),{},{address:s,governance:r.fields.name}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.renderContestItems=function(){return e.props.contestsInfo.map((function(e,t){return Object(J.jsx)(Te,{isGrey:t%2===0||0===t,contest:e},e.address)}))},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(!(t=this.props.contestsInfo)||t.length<=1)&&this.setState({isLoaderVisible:!0}),e.next=5,this.fetchGovernances();case 5:return e.next=7,this.fetchContests();case 7:this.setState({isLoaderVisible:!1}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Fetching contests failed: ",e.t0),setTimeout(Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.fetchGovernances();case 2:return e.next=4,n.fetchContests();case 4:n.setState({isLoaderVisible:!1});case 5:case"end":return e.stop()}}),e)}))),5e3);case 14:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.selectedGovernance.name===this.props.selectedGovernance.name){e.next=6;break}return this.setState({isLoaderVisible:!0}),e.next=5,this.fetchContests();case 5:this.setState({isLoaderVisible:!1});case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Fetching contests failed: ",e.t0),setTimeout(this.fetchContests,5e3);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.contestsInfo,n=e.selectedGovernance,s=this.state,r=s.governances,a=s.isLoaderVisible;return Object(J.jsxs)("div",{className:"contests-list",children:[Object(J.jsx)(Le,{governances:r,selectedGovernance:n}),a?Object(J.jsx)(Ve,{}):(null===t||void 0===t?void 0:t.length)?this.renderContestItems():Object(J.jsx)(Ve,{isFailed:!0})]})}}]),n}(s.Component)),Fe=Object(c.b)((function(e){var t=e.contest,n=e.common,s=t.contestsInfo,r=n.selectedGovernance;return{contestsInfo:Object.values(s),selectedGovernance:r}}),{setBulkContestsInfo:function(e){return function(t){t({type:_,payload:e})}}})(Pe),Ve=(n(117),function(e){var t=e.isFailed,n=t?"/load-failed.png":"/loader.gif",s=t?"Nothing here :(":"Loading...";return Object(J.jsx)("div",{className:"loader",children:Object(J.jsx)("img",{className:"loader__cat",src:n,alt:s})})}),Ue=(n(118),function(){var e=Object(s.useRef)(null),t=Object(c.c)();return Object(J.jsx)("div",{ref:e,className:"tutorial-popup",onClick:function(n){e&&n.target===e.current&&t(T(!1))},children:Object(J.jsxs)("div",{className:"tutorial-popup__container",children:[Object(J.jsx)(K,{onClick:function(){return t(T(!1))}}),Object(J.jsx)("div",{className:"tutorial-popup__header",children:"Where to find contest address?"}),Object(J.jsxs)("ol",{children:[Object(J.jsxs)("li",{className:"tutorial-popup__list-item",children:["Go to ",Object(J.jsx)("a",{href:j.MAIN_GOV_LINK,target:"_blank",rel:"noreferrer",children:"https://gov.freeton.org"})]}),Object(J.jsx)("li",{className:"tutorial-popup__list-item",children:"Find a contest you want to check"}),Object(J.jsxs)("li",{className:"tutorial-popup__list-item",children:["Click here to copy the contest address",Object(J.jsx)("img",{src:"/tutorial-1.jpg",alt:""})]}),Object(J.jsxs)("li",{className:"tutorial-popup__list-item",style:{marginBottom:0},children:["Paste contest address into the search bar",Object(J.jsx)("img",{src:"/tutorial-2.jpg",alt:""})]}),Object(J.jsx)("li",{className:"tutorial-popup__list-item",children:"Hit Enter or click on the search icon"}),Object(J.jsx)("li",{className:"tutorial-popup__list-item",children:"Great! You are amazing!"})]})]})})});n(119);n(120).config(),o.a.init(),f.init(),a.a.render(Object(J.jsx)(c.a,{store:U,children:Object(J.jsx)(i.a,{children:Object(J.jsx)(B,{})})}),document.getElementById("root"))},36:function(e,t,n){"use strict";t.a={"ABI version":2,header:["pubkey","time"],functions:[{name:"constructor",inputs:[{name:"title",type:"bytes"},{name:"link",type:"bytes"},{name:"hash",type:"uint256"},{name:"juryAddr",type:"address"},{name:"juryKeys",type:"uint256[]"}],outputs:[]},{name:"setupContest",inputs:[{name:"startsIn",type:"uint16"},{name:"lastsFor",type:"uint16"}],outputs:[]},{name:"setupJurors",inputs:[{name:"jurors",type:"address[]"}],outputs:[]},{name:"rejectApplicant",inputs:[],outputs:[]},{name:"submitWithContact",inputs:[{name:"participant",type:"address"},{name:"forumLink",type:"bytes"},{name:"fileLink",type:"bytes"},{name:"hash",type:"uint256"},{name:"contact",type:"address"}],outputs:[]},{name:"submit",inputs:[{name:"participant",type:"address"},{name:"forumLink",type:"bytes"},{name:"fileLink",type:"bytes"},{name:"hash",type:"uint256"}],outputs:[]},{name:"openContest",inputs:[],outputs:[]},{name:"closeContest",inputs:[],outputs:[]},{name:"openVoting",inputs:[],outputs:[]},{name:"closeVoting",inputs:[],outputs:[]},{name:"rejectVote",inputs:[],outputs:[]},{name:"voteFor",inputs:[{name:"id",type:"uint16"},{name:"mark",type:"uint32"}],outputs:[]},{name:"voteForCommented",inputs:[{name:"id",type:"uint16"},{name:"mark",type:"uint32"},{name:"comment",type:"bytes"}],outputs:[]},{name:"abstain",inputs:[{name:"id",type:"uint16"},{name:"comment",type:"bytes"}],outputs:[]},{name:"voteAgainst",inputs:[{name:"id",type:"uint16"},{name:"comment",type:"bytes"}],outputs:[]},{name:"finalizeResults",inputs:[],outputs:[]},{name:"votingEndsIn",inputs:[],outputs:[{name:"daysLeft",type:"uint64"}]},{name:"contestStartCountdown",inputs:[],outputs:[{name:"secondsLeft",type:"int64"}]},{name:"contestCountdown",inputs:[],outputs:[{name:"secondsLeft",type:"int64"}]},{name:"votingCountdown",inputs:[],outputs:[{name:"secondsLeft",type:"int64"}]},{name:"getId",inputs:[{name:"addr",type:"address"}],outputs:[{name:"value0",type:"uint16"}]},{name:"listContenders",inputs:[],outputs:[{name:"ids",type:"uint16[]"},{name:"addresses",type:"address[]"}]},{name:"getStatsFor",inputs:[{name:"id",type:"uint16"}],outputs:[{name:"totalPoints",type:"uint64"},{name:"avgHi",type:"uint32"},{name:"avgLo",type:"uint32"},{name:"jurorsVoted",type:"uint16"},{name:"accepted",type:"uint16"},{name:"abstained",type:"uint16"},{name:"rejected",type:"uint16"}]},{name:"getVotesPerJuror",inputs:[{name:"id",type:"uint16"}],outputs:[{name:"jurorsFor",type:"address[]"},{name:"marks",type:"uint32[]"},{name:"commentsFor",type:"bytes[]"},{name:"jurorsAbstained",type:"address[]"},{name:"commentsAbstained",type:"bytes[]"},{name:"jurorsAgainst",type:"address[]"},{name:"commentsAgainst",type:"bytes[]"}]},{name:"getJuryStats",inputs:[],outputs:[{components:[{name:"id",type:"uint16"},{name:"addr",type:"address"}],name:"jury",type:"map(uint256,tuple)"}]},{name:"getContestStats",inputs:[],outputs:[{name:"totalScore",type:"uint64"},{name:"avgHi",type:"uint32"},{name:"avgLo",type:"uint32"},{name:"jurorsVoted",type:"uint16"},{name:"entries",type:"uint16"}]},{name:"getContestInfo",inputs:[],outputs:[{name:"title",type:"bytes"},{name:"link",type:"bytes"},{name:"hash",type:"uint256"},{name:"juryAddr",type:"address"},{name:"juryKeys",type:"uint256[]"},{name:"juryAddresses",type:"address[]"},{name:"maxVotingAttempts",type:"uint8"}]},{name:"getContestProgress",inputs:[],outputs:[{name:"votesCount",type:"uint64"},{name:"contendersCount",type:"uint16"},{name:"contestOpen",type:"bool"},{name:"votingOpen",type:"bool"},{name:"contestDeadline",type:"uint64"},{name:"votingDeadline",type:"uint64"},{name:"resultsFinalized",type:"bool"}]},{name:"getInfoFor",inputs:[{name:"id",type:"uint16"}],outputs:[{name:"addr",type:"address"},{name:"forumLink",type:"bytes"},{name:"fileLink",type:"bytes"},{name:"hash",type:"uint256"},{name:"appliedAt",type:"uint64"},{name:"contact",type:"address"}]},{name:"getContendersInfo",inputs:[],outputs:[{name:"ids",type:"uint16[]"},{name:"addrs",type:"address[]"},{name:"forumLinks",type:"bytes[]"},{name:"fileLinks",type:"bytes[]"},{name:"hashes",type:"uint256[]"},{name:"appliedAts",type:"uint64[]"},{name:"contacts",type:"address[]"}]},{name:"getVotes",inputs:[],outputs:[{name:"votes",type:"uint64"}]},{name:"getVotesFor",inputs:[{name:"id",type:"uint16"}],outputs:[{name:"votes",type:"uint16"}]},{name:"getTotalRatingFor",inputs:[{name:"id",type:"uint16"}],outputs:[{name:"rating",type:"uint64"}]},{name:"resultsFinalized",inputs:[],outputs:[{name:"flag",type:"bool"}]},{name:"getFinalStatusFor",inputs:[{name:"id",type:"uint16"}],outputs:[{name:"status",type:"bool"}]},{name:"getFinalStatus",inputs:[],outputs:[{name:"status",type:"bool[]"}]},{name:"getFinalContestStats",inputs:[],outputs:[{name:"totalScore",type:"uint64"},{name:"avgHi",type:"uint32"},{name:"avgLo",type:"uint32"},{name:"jurorsVoted",type:"uint16"},{name:"entries",type:"uint16"},{name:"passed",type:"uint16"},{name:"rejected",type:"uint16"}]},{name:"getFinalStatsFor",inputs:[{name:"id",type:"uint16"}],outputs:[{name:"status",type:"bool"},{name:"totalPoints",type:"uint64"},{name:"avgHi",type:"uint32"},{name:"avgLo",type:"uint32"},{name:"jurorsVoted",type:"uint16"},{name:"accepted",type:"uint16"},{name:"abstained",type:"uint16"},{name:"rejected",type:"uint16"}]},{name:"getFinalVotingData",inputs:[],outputs:[{name:"ids",type:"uint16[]"},{name:"juryAddresses",type:"address[]"},{name:"statuses",type:"bool[]"},{name:"totalRatings",type:"uint64[]"},{name:"jurorsVoted",type:"uint16[]"},{name:"votesFor",type:"uint16[]"},{name:"votesAbstained",type:"uint16[]"},{name:"votesAgainst",type:"uint16[]"}]},{name:"transfer",inputs:[{name:"dest",type:"address"},{name:"value",type:"uint64"},{name:"bounce",type:"bool"},{name:"flags",type:"uint16"}],outputs:[]},{name:"forceContest",inputs:[{name:"flag",type:"bool"}],outputs:[]},{name:"forceVoting",inputs:[{name:"flag",type:"bool"}],outputs:[]},{name:"forceFinalize",inputs:[{name:"flag",type:"bool"}],outputs:[]},{name:"setContestDeadline",inputs:[{name:"time",type:"uint64"}],outputs:[]},{name:"setVotingDeadline",inputs:[{name:"time",type:"uint64"}],outputs:[]},{name:"upgrade",inputs:[{name:"c",type:"cell"}],outputs:[]}],data:[{key:1,name:"debugNonce",type:"uint256"}],events:[]}},37:function(e,t){},4:function(e,t){e.exports={SORT_BY_VALUES_PARTICIPANTS:{DEFAULT:"place",PLACE:"place",REWARD:"reward",SUBMISSION_ID:"id",SCORE:"score",ACCEPTED:"acceptAmount",REJECTED:"rejectAmount"},SORT_BY_VALUES_JURY:{DEFAULT:"id",REWARD:"reward",JURY_ID:"id",TOTAL_VOTES:"totalVotes",ACCEPTED:"acceptAmount",ABSTAINED:"abstainAmount",REJECTED:"rejectAmount"},EMPTY_ADDRESS:"0:0000000000000000000000000000000000000000000000000000000000000000",EXPLORER_BASE_URL:"https://ton.live/accounts/accountDetails?id=",DB_CONTENT_TYPES:{CONTEST:"contest",GOVERNANCE:"governance"},DEFAULT_GOVERNANCE:{NAME:"main",FULL_NAME:"Main"},REWARD_TRIGGER_FOR_INPUT:-1,MAIN_GOV_LINK:"https://gov.freeton.org/"}},41:function(e,t,n){"use strict";(function(e){var s=n(12),r=n(2),a=n.n(r),c=n(3),i=n(16),o=n(6),u=n(14),l=n(15),d=n(35),p=n(64),m=n(36),b=new(function(){function t(){Object(u.a)(this,t),this.bocCache=new Map}return Object(l.a)(t,[{key:"init",value:function(){d.TonClient.useBinaryLibrary(p.a),this.client=new d.TonClient({network:{server_address:"main.ton.dev"}})}},{key:"getContestSubmissionsAndJurors",value:function(){var t=Object(o.a)(a.a.mark((function t(n){var s,r,u,l,d,p,m=this;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,this.runContestFunction(n,"getContendersInfo");case 5:return s=t.sent,r=s.ids.map((function(t,n){var r=parseInt(s.appliedAts[n].substr(0,10),10),a=new Date(1e3*r);return{id:parseInt(t,10),title:"Submission ".concat(parseInt(t,10)),participantAddress:s.addrs[n],discussionLink:e.from(s.forumLinks[n],"hex").toString(),fileLink:e.from(s.fileLinks[n],"hex").toString(),hash:s.hashes[n],createdAt:a,createdAtTimestamp:r,contactAddress:s.contacts[n]}})),u={},t.next=10,Promise.all(r.map(function(){var e=Object(o.a)(a.a.mark((function e(t){var s,r,o,l,d,p,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b=function(e,t){e.forEach((function(e,n){u[e]?u[e][t]=(u[e][t]||0)+1:u[e]=Object(i.a)({},t,1)}))},e.next=3,m.getVotesPerJurorForSubmission(n,t.id);case 3:return s=e.sent,r=s.jurorsFor,o=s.jurorsAbstained,l=s.jurorsAgainst,d=s.marks,p={marks:d,abstainAmount:o.length,rejectAmount:l.length},b(r,"acceptAmount"),b(o,"abstainAmount"),b(l,"rejectAmount"),e.abrupt("return",Object(c.a)(Object(c.a)({},t),p));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 10:for(p in l=t.sent,d=1,u)u[p].id=d,d++;return t.abrupt("return",{submissionsWithStats:l,juryStats:u});case 16:return t.prev=16,t.t0=t.catch(2),console.error("Getting contest submissions failed: ",t.t0),t.abrupt("return",{submissionsWithStats:[],juryStats:{}});case 20:case"end":return t.stop()}}),t,this,[[2,16]])})));return function(e){return t.apply(this,arguments)}}()},{key:"getVotesPerJurorForSubmission",value:function(){var e=Object(o.a)(a.a.mark((function e(t,n){var s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.runContestFunction(t,"getVotesPerJuror",{id:n});case 4:return s=e.sent,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getContestInfo",value:function(){var t=Object(o.a)(a.a.mark((function t(n){var r,i,o,u,l,d;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([this.runContestFunction(n,"getContestInfo"),this.runContestFunction(n,"getContestProgress")]);case 3:return r=t.sent,i=Object(s.a)(r,2),o=i[0],u=i[1],l=e.from(o.link,"hex").toString(),d=e.from(o.title,"hex").toString(),t.abrupt("return",Object(c.a)(Object(c.a)(Object(c.a)({},o),u),{},{link:l,title:d}));case 10:t.prev=10,t.t0=t.catch(0),console.error("Getting full contest info failed:",t.t0);case 13:case"end":return t.stop()}}),t,this,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},{key:"isAddressValid",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.client.utils.convert_address({address:t,output_format:{type:"Hex"}});case 3:return n=e.sent,e.abrupt("return",!!n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"runContestFunction",value:function(){var e=Object(o.a)(a.a.mark((function e(t,n,s){var r,c,i,o,u,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.bocCache.has(t)){e.next=5;break}c=this.bocCache.get(t),e.next=11;break;case 5:return i={collection:"accounts",filter:{id:{eq:t}},result:"id, boc"},e.next=8,this.client.net.wait_for_collection(i);case 8:o=e.sent,c=o.result.boc,this.bocCache.set(t,c);case 11:return u={abi:{type:"Contract",value:m.a},address:t,call_set:{function_name:n},signer:{type:"None"}},s&&(u.call_set.input=s),e.next=15,this.client.abi.encode_message(u);case 15:return l=e.sent,e.next=18,this.client.tvm.run_tvm({message:l.message,account:c,abi:{type:"Contract",value:m.a}});case 18:return d=e.sent,e.abrupt("return",null===(r=d.decoded)||void 0===r?void 0:r.output);case 22:e.prev=22,e.t0=e.catch(0),console.error("Contest function ".concat(n," executeion failed: "),e.t0);case 25:case"end":return e.stop()}}),e,this,[[0,22]])})));return function(t,n,s){return e.apply(this,arguments)}}()}]),t}());t.a=b}).call(this,n(74).Buffer)}},[[123,1,2]]]);
//# sourceMappingURL=main.40d7cf16.chunk.js.map